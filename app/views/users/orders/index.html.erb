<div class="container">
  <div class="row">
    <h2>注文履歴一覧</h2>
  </div>
  <div class="row">
    <table class="table table-bordered">
      <thead>
          <tr>
            <th>注文日</th>
            <th>配送先</th>
            <th>注文商品</th>
            <th>支払金額</th>
            <th>ステータス</th>
            <th>注文詳細</th>
          </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr class="text-center">
            <td><%= order.created_at.strftime("%Y/%m/%d") %></td>
            <td>
              <%= order.zip_code %><br>
              <%= order.address %><br>
              <%= order.name %>
            </td>
            <td>
              <% order.order_products.each do |order_product| %>
                <%= order_product.product.name %><br>
              <% end %>
            </td>
            <% if order.order_products.present? %>
              <td><%= order.total_price.to_s(:delimited) %>円</td>
              <td class="col-xs-1">
                <% case order.order_status when 0 %>
                  <span class="badge" style="background: red;">入金待ち</span>
                <% when 1 %>
                  <span class="badge" style="background: orange;">入金確認</span>
                <% when 2 %>
                  <span class="badge" style="background: green;">製作中</span>
                <% when 3 %>
                  <span class="badge" style="background: blue;">発送準備中</span>
                <% when 4 %>
                  <span class="badge" style="background: gray;">発送済み</span>
                <% end %>
              </td>
              <td class="col-xs-1"><%= link_to "表示する", users_order_path(order), class:"btn btn-primary"%></td>
            <% else %>
              <td></td>
              <td><span class="badge" style="background: red">未確定</span></td>
              <td></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
